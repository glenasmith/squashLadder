/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
CONNECT USER SA
alter table game drop constraint FK304BF292359C1C
alter table game drop constraint FK304BF21B77FF9E
drop table game if exists
drop table player if exists
create table game (id bigint generated by default as identity (start with 1), version bigint not null, date_played timestamp not null, loser_id bigint not null, winner_id bigint not null, primary key (id))
create table player (id bigint generated by default as identity (start with 1), version bigint not null, email varchar(255) not null, games_played integer not null, games_won integer not null, name varchar(255) not null, primary key (id), unique (name))
alter table game add constraint FK304BF292359C1C foreign key (winner_id) references player
alter table game add constraint FK304BF21B77FF9E foreign key (loser_id) references player
INSERT INTO PLAYER VALUES(1,0,'',0,0,'Kate')
INSERT INTO PLAYER VALUES(2,0,'',0,0,'Emily')
INSERT INTO GAME VALUES(1,0,'2009-05-02 00:00:00.000000000',2,1)
DELETE FROM PLAYER WHERE ID=1
INSERT INTO PLAYER VALUES(1,1,'',1,1,'Kate')
DELETE FROM PLAYER WHERE ID=2
INSERT INTO PLAYER VALUES(2,1,'',1,0,'Emily')
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
CONNECT USER SA
alter table game drop constraint FK304BF292359C1C
alter table game drop constraint FK304BF21B77FF9E
drop table game if exists
drop table player if exists
create table game (id bigint generated by default as identity (start with 1), version bigint not null, date_played timestamp not null, loser_id bigint not null, winner_id bigint not null, primary key (id))
create table player (id bigint generated by default as identity (start with 1), version bigint not null, email varchar(255) not null, games_played integer not null, games_won integer not null, name varchar(255) not null, primary key (id), unique (name))
alter table game add constraint FK304BF292359C1C foreign key (winner_id) references player
alter table game add constraint FK304BF21B77FF9E foreign key (loser_id) references player
INSERT INTO PLAYER VALUES(1,0,'',0,0,'Kate')
INSERT INTO PLAYER VALUES(2,0,'',0,0,'Emily')
INSERT INTO GAME VALUES(1,0,'2009-05-02 00:00:00.000000000',2,1)
DELETE FROM PLAYER WHERE ID=1
INSERT INTO PLAYER VALUES(1,1,'',1,1,'Kate')
DELETE FROM PLAYER WHERE ID=2
INSERT INTO PLAYER VALUES(2,1,'',1,0,'Emily')
